// Generated by CoffeeScript 2.6.1
import gEData from "./gameEditor_data";

import Left from "./gameEditor_left";

import Right from "./gameEditor_right";

import Box from "../common/box";

import Tag from "../common/tag";

import getColor from "../help/getColor";

import Notice from "../common/notice";

import gENav from "./gameEditor_nav";

import gEExtNav from "./gameEditor_extNav";

export default function() {
  return {
    oninit: () => {
      gEData.initRightMenu();
      document.addEventListener("keydown", function(e) {
        gEData.downkeys.push(e.keyCode);
        if (gEData.downkeys[0] === 8 || gEData.downkeys[0] === 46) { //删除
          gEData.divList.delSelectedItems();
        }
        if ((gEData.downkeys[0] === 91 || gEData.downkeys[0] === 93) && gEData.downkeys[1] === 67) { //复制
          gEData.divList.copySelectedItems();
        }
        if ((gEData.downkeys[0] === 91 || gEData.downkeys[0] === 93) && gEData.downkeys[1] === 86) { //粘贴
          gEData.divList.pasteCopyedItems();
        }
        if ((gEData.downkeys[0] === 91 || gEData.downkeys[0] === 93) && gEData.downkeys[1] === 90) { //撤销
          gEData.divList.undo();
        }
        if (gEData.downkeys[0] === 18 && gEData.downkeys[1] === 71) { //编组
          gEData.divList.becomeGroup();
        }
        if (gEData.downkeys[0] === 18 && gEData.downkeys[1] === 16 && gEData.downkeys[2] === 71) { //拆散
          gEData.divList.exitGroup();
        }
        if ((gEData.downkeys[0] === 91 || gEData.downkeys[0] === 93) && gEData.downkeys[1] === 16 && gEData.downkeys[2] === 90) { //重做
          gEData.divList.redo();
        }
        if (gEData.downkeys[0] === 65) { //删除
          gEData.mouseState = "mouse";
        }
        if (gEData.downkeys[0] === 80) {
          gEData.mouseState = "pen";
        }
        if (gEData.downkeys[0] === 70) { //填充
          gEData.divList.fillRect();
        }
        m.redraw();
        return console.log(gEData.downkeys);
      });
      return document.addEventListener("keyup", function(e) {
        gEData.downkeys = [];
        return console.log(gEData.downkeys);
      });
    },
    view: function() {
      return m("", {
        style: {
          a: 12
        }
      }, [
        //background:getColor("green").back
        m(Notice),
        m("",
        {
          style: {
            display: "flex",
            background: "#fff"
          }
        },
        [m(Left),
        m(Right)]),
        m("",
        {
          style: {
            position: "fixed",
            right: 0,
            top: 0
          }
        },
        [
          m("",
          {
            style: {
              margin: "3rem",
              fontSize: "2rem",
              color: "#ccc"
            }
          },
          [`X：${gEData.pen.x}`,
          m("br"),
          `y：${gEData.pen.y}`])
        ]),
        m(gENav),
        m(gEExtNav)
      ]);
    }
  };
};
